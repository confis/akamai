# This is a basic workflow to help you get started with Actions 
name: Add SubDomain

defaults:
  run:
    shell: bash
    working-directory: script

# Controls when the workflow will run
on:
  push:
    branches: ['master']
    paths: ['script/*.yml', 'script/*.sh', '.github/workflows/*.yml','domain/domainlist.txt',]
jobs:
  # This workflow contains a single job called "build"
          
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v1
  #  - name: run sh script
  #    run: chmod +x ./script/addcrt.sh
      env:
        DOMAIN_NAME: test.com
    - name:  run and echo file   
      run: |
          cat ./script/sample.yml | sed 's/foo.com/'$DOMAIN_NAME'/g' > ./crt/$DOMAIN_NAME.yml
          echo "env/DOMAIN_NAME.yml"

 #         cat ./script/sample.yml | sed 's/foo.com/'$DOMAIN_NAME'/g' > ./crt/$DOMAIN_NAME.yml
 #         echo $DOMAIN_NAME.yml > $DOMAIN_NAME.yml
 #         echo $DOMAIN_NAME.yml
          

          
#    - name: Run the build shell script
#      run: |
#          git add  "$DOMAIN_NAME.yml"
#          git commit -m "Commit message"
          
#    - name: Push changes  # push the output folder to your repo #     uses: ad-m/github-push-action@master
#      with:
#        github_token: ${{ secrets.GITHUB_TOKEN }}
#        force: true



